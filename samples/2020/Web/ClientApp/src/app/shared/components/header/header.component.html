<!-- Page Header Start-->
<div class="page-main-header" [ngClass]="{'open' : navServices.collapseSidebar}" id="page-main-header">
  <div class="main-header-right row">
    <div class="mobile-sidebar">
      <div class="media-body text-right switch-sm">
        <label class="switch switch-safari-only">
          <a href="javascript:void(0)" (click)="collapseSidebar()">
            <app-feather-icons id="sidebar-toggle" [icon]="'menu'"></app-feather-icons>
            <app-feather-icons id="sidebar-toggle-expanded" [icon]="'chevron-left'" style="display: none;"></app-feather-icons>
          </a>
        </label>
      </div>
    </div>
    <div class="nav-right col">
      <ul class="nav-menus">
        <li>
          <div class="media align-items-center">
            <div class="media align-items-center large-device-only" *ngIf="authService.currentUserValue as user">
              <a href="/">
                <img src="assets/images/legendary-logo.png" alt="" style="height: 50px;">
              </a>
            </div>
          </div>
        </li>
        <li>
          <form class="form-inline search-form notification-bell-text">
            <div class="form-group">
              <div class="col-12 d-inline-flex">
                  <input class="form-control-plaintext" [class.open]="isOpenMobile" [(ngModel)]="text"
                  [ngModelOptions]="{standalone: true}" (keydown)="onSearchKeyDown($event)" type="text" autocomplete="off"
                  placeholder="Search..">
                  <button class="btn btn-orange m-l-10" (click)=searchTerm()>Search</button>
              </div>           
              <span class="d-sm-none mobile-search">
                <app-feather-icons [icon]="'search'" (click)="isOpenMobile=!isOpenMobile"></app-feather-icons>
              </span>
              <div class="Typeahead-menu" [class.is-open]="searchResult" *ngIf="menuItems?.length && !isSmartSearch" id="search-outer">
                <div class="ProfileCard u-cf" *ngFor="let menuItem of menuItems | slice:0:8">
                  <div class="ProfileCard-avatar">
                    <app-feather-icons [icon]="menuItem.icon" class="header-search"></app-feather-icons>
                  </div>
                  <div class="ProfileCard-details">
                    <div class="ProfileCard-realName">
                      <a [routerLink]="menuItem?.path" class="realname" (click)="removeFix()">{{menuItem?.title}}</a>
                    </div>
                  </div>
                </div>
              </div>
              <div class="Typeahead-menu smart-search loader" [class.is-open]="isSearch">
                  <div class="loader-box">
                      <div class="loader">
                        <div class="line bg-warning"></div>
                        <div class="line bg-warning"></div>
                        <div class="line bg-warning"></div>
                        <div class="line bg-warning"></div>
                      </div>
                  </div>  
              </div>
              <div class="Typeahead-menu smart-search" [class.is-open]="searchResult" *ngIf="searchDto && isSmartSearch">
                <div *ngIf="searchDto.Users" class="search-result-section">
                  <h4>Users</h4>
                  <ul>
                    <li *ngFor="let userItem of searchDto.Users.items">
                      <a href="#">{{userItem.title}}</a>
                    </li>
                  </ul>
                </div>
                <div *ngIf="searchDto.Events" class="search-result-section">
                  <h4>Events</h4>
                  <ul>
                    <li *ngFor="let eventItem of searchDto.Events.items">
                      <a href="#">{{eventItem.title}}</a>
                    </li>
                  </ul>
                </div>
              </div>
              <div class="Typeahead-menu" [class.is-open]="searchResultEmpty">
                <div class="tt-dataset tt-dataset-0">
                  <div class="EmptyMessage">
                    Sorry, no results were found.
                  </div>
                </div>
              </div>
            </div>
          </form>
        </li>
        <li class="onhover-dropdown">
          <div class="media align-items-center">
            <app-feather-icons [icon]="'bell'"></app-feather-icons>
            <span class="badge badge-pill badge-orange notification-badge">{{notificationsCount}}</span>
            <div class="user-profile notification-bell-text">
              Notifications
            </div>
          </div>
          <ul class="notification-dropdown onhover-show-div custom-scrollbar">  
            <li>Notification <span class="badge badge-pill badge-orange pull-right" style="color:white">{{notificationsCount}}</span></li>  
            <li *ngFor="let notification of notifications">
              <div class="media">
                <div class="media-body">
                  <div>
                      <h6 class="mt-0">
                          <span>
                            <b>{{notification.notificationTypeName}} notification</b>
                          </span>
                          <a href="javascript:void(0)" (click)="onDeleteNotifClick(notification.id)" *ngIf="!notification.highPriority"><span class="pull-right"><i class="fa fa-times"></i></span></a>
                      </h6>                      
                  </div>
                  <div>
                    <div class="row">
                      <div class="col-2 col-sm-2">
                          <h4 class="mt-0">
                              <span><i class="{{notification.icon}}"></i></span>
                          </h4>      
                      </div>
                      <div class="col-10 col-sm-10">
                          <p class="mb-0 ml-0">
                            {{notification.message}} <a href="{{notification.notificationUrl}}" *ngIf="notification.notificationUrl" target="_blank">{{notification.notificationUrl | slice:0:20}}...</a>
                          </p>
                         
                      </div>
                    </div>
                     
                     
                  </div>
                  
                </div>
              </div>
            </li>
            <li id="AllNotifications" class="bg-light txt-dark"><span (click)="onAllNoficationClick()">ALL NOTIFICATIONS</span></li>
          </ul>
        </li>
        <li class="onhover-dropdown">
          <div class="media align-items-center" *ngIf="!authService.currentUserValue as user">
            <img class="align-self-center pull-right img-50 rounded-circle" src="assets/images/dashboard/user.png" alt="header-user">
          </div>
          <div class="media align-items-center" *ngIf="authService.currentUserValue as user">
            <img class="align-self-center pull-right img-50 rounded-circle"
                 [src]="authService.getCurrentUserPhotoUrl()" alt="header-user">
            <div class="user-profile notification-bell-text">
              {{authService.currentUserValue.firstName}}
            </div>
            <app-feather-icons [icon]="'chevron-down'" class="notification-bell-text"></app-feather-icons>
          </div>
          <ul class="profile-dropdown onhover-show-div p-20">
            <li *ngIf="authService.currentUserValue">
              <a href="javascript:void(0)" (click)="myEvent()">
                <app-feather-icons [icon]="'calendar'"></app-feather-icons>My Events
              </a>
            </li>
            <li>
              <div class="custom-control custom-switch">
                <input type="checkbox" [checked]="isDarkThemeSelected" (change)="themeChange($event)" class="custom-control-input" id="customSwitches">
                <label class="custom-control-label" for="customSwitches">Dark theme</label>
              </div>
            </li>
            <li *ngIf="authService.currentUserValue">
              <a href="javascript:void(0)" (click)="logout()">
                <app-feather-icons [icon]="'log-out'"></app-feather-icons>Logout
              </a>
            </li>
          </ul>
        </li>
      </ul>
    </div>
  </div>
</div>
<!-- Page Header Ends -->
